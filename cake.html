<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cake Cutting - Happy Birthday Rana ji! ðŸŽ‰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Poppins font for a modern look -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
  <!-- Tailwind CSS CDN for easy styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Confetti library for celebration effect -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      /* Vibrant and celebratory peach gradient background */
      background: linear-gradient(to bottom right, #ffebee, #ffccbc, #ffab91); /* Peach gradient */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh; /* Use min-height for better responsiveness */
      overflow: hidden; /* Prevent scrollbars due to confetti and floating elements */
      color: #333; /* Default text color */
      position: relative; /* For z-index of floating hearts */
    }
    /* Styles for the cake SVG container */
    .cake-container {
      width: 280px; /* Increased size for prominence */
      cursor: pointer;
      position: relative; /* For absolute positioning of slices */
      filter: drop-shadow(0 10px 15px rgba(0,0,0,0.2)); /* Drop shadow for depth */
      animation: bounce-in 1s ease-out forwards; /* Initial bounce animation */
      z-index: 10; /* Ensure cake is above floating hearts */
    }

    /* Individual cake slices styling */
    .cake-slice {
      transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1); /* Smooth transition for slices */
      transform-origin: center center; /* Ensure transformations are from the center */
    }

    /* Animation for cake slices when cut */
    .cake-container.cut .cake-base {
      transform: translateY(10px); /* Slight drop for the main base */
    }
    .cake-container.cut .slice-left {
      transform: translateX(-40px) rotate(-10deg); /* Move left slice */
    }
    .cake-container.cut .slice-right {
      transform: translateX(40px) rotate(10deg); /* Move right slice */
    }
    .cake-container.cut .slice-top-left {
      transform: translate(-30px, -20px) rotate(-5deg); /* Move top-left slice */
    }
    .cake-container.cut .slice-top-right {
      transform: translate(30px, -20px) rotate(5deg); /* Move top-right slice */
    }

    /* Animation for the celebratory message */
    .message {
      margin-top: 30px;
      font-size: 1.5rem;
      color: #d946ef; /* Purple-500 */
      opacity: 0;
      transition: opacity 1s ease-in, transform 1s ease-in;
      transform: translateY(20px);
      text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
      z-index: 10; /* Ensure message is above floating hearts */
    }
    .message.show {
      opacity: 1;
      transform: translateY(0);
    }
    /* Initial bounce animation for the cake */
    @keyframes bounce-in {
      0% { transform: scale(0.8); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); }
    }
    /* Animation for main heading */
    @keyframes fade-in-down {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-down {
      animation: fade-in-down 1s ease-out forwards;
    }

    /* Floating Hearts Background Animation */
    .floating-hearts-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none; /* Allow clicks to pass through */
      overflow: hidden;
      z-index: 0; /* Ensure hearts are in the background */
      opacity: 0; /* Hidden initially */
      transition: opacity 2s ease-in-out;
    }

    .floating-hearts-container.show-hearts {
      opacity: 1;
    }

    .heart {
      position: absolute;
      background-color: #FFC0CB; /* Light pink */
      width: 50px; /* Base size for hearts */
      height: 45px;
      transform: rotate(-45deg);
      animation: float-up 15s infinite ease-in-out; /* Long, slow float animation */
      opacity: 0; /* Hidden initially */
      border-radius: 50% 50% 0 0; /* Top rounded corners for heart shape */
    }

    .heart::before,
    .heart::after {
      content: '';
      position: absolute;
      width: 50px;
      height: 45px;
      background-color: #FFC0CB;
      border-radius: 50%;
    }

    .heart::before {
      top: -25px;
      left: 0;
    }

    .heart::after {
      top: 0;
      left: 25px;
    }

    /* Adjusting heart colors and sizes */
    .heart:nth-child(2n) { background-color: #FF69B4; width: 60px; height: 55px; animation-duration: 18s; animation-delay: 2s; } /* Medium pink, larger */
    .heart:nth-child(3n) { background-color: #FF1493; width: 40px; height: 35px; animation-duration: 12s; animation-delay: 4s; } /* Deep pink, smaller */
    .heart:nth-child(4n) { background-color: #DC143C; width: 70px; height: 65px; animation-duration: 20s; animation-delay: 6s; } /* Crimson, even larger */

    /* Animation keyframes for floating hearts */
    @keyframes float-up {
      0% {
        transform: translateY(100vh) rotate(-45deg) scale(0.8);
        opacity: 0;
      }
      20% {
        opacity: 0.8;
      }
      100% {
        transform: translateY(-100%) rotate(-45deg) scale(1.2);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

  <h1 class="text-4xl md:text-5xl font-extrabold text-pink-600 mb-8 animate-fade-in-down text-center px-4" style="text-shadow: 2px 2px 5px rgba(0,0,0,0.1);">
    ðŸŽ‚ Tap the Cake to Cut! ðŸŽ‰
  </h1>

  <!-- Enhanced Cartoon Cake SVG with multiple paths for slicing -->
  <div class="cake-container" id="cake">
    <svg viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Bottom Tier - Main Base -->
      <g class="cake-slice cake-base">
        <rect x="25" y="120" width="200" height="80" rx="10" fill="#FCA5A5"/> <!-- Pink-400 -->
        <path d="M25 120 C50 100, 200 100, 225 120" fill="#F87171"/> <!-- Pink-500 top -->
      </g>

      <!-- Middle Tier - Main Base -->
      <g class="cake-slice cake-base">
        <rect x="50" y="70" width="150" height="60" rx="8" fill="#FDBA74"/> <!-- Orange-300 -->
        <path d="M50 70 C70 55, 180 55, 200 70" fill="#FB923C"/> <!-- Orange-400 top -->
      </g>

      <!-- Top Tier - Main Base -->
      <g class="cake-slice cake-base">
        <rect x="75" y="30" width="100" height="45" rx="6" fill="#FDE68A"/> <!-- Yellow-200 -->
        <path d="M75 30 C85 20, 165 20, 175 30" fill="#FCD34D"/> <!-- Yellow-300 top -->
      </g>

      <!-- Candles on top tier -->
      <g class="cake-slice cake-base">
        <circle cx="95" cy="25" r="3" fill="#FBBF24"/> <!-- Yellow-400 candle 1 -->
        <path d="M94 20 L96 20 L95 16 Z" fill="#F59E0B"/> <!-- Orange-500 flame 1 -->
        <circle cx="125" cy="25" r="3" fill="#FBBF24"/> <!-- Yellow-400 candle 2 -->
        <path d="M124 20 L126 20 L125 16 Z" fill="#F59E0B"/> <!-- Orange-500 flame 2 -->
        <circle cx="155" cy="25" r="3" fill="#FBBF24"/> <!-- Yellow-400 candle 3 -->
        <path d="M154 20 L156 20 L155 16 Z" fill="#F59E0B"/> <!-- Orange-500 flame 3 -->
      </g>

      <!-- Slices - these will move -->
      <!-- Slice 1 (Left) -->
      <g class="cake-slice slice-left">
        <rect x="25" y="120" width="30" height="80" rx="5" fill="#EF4444"/> <!-- Red-500 -->
        <path d="M25 120 C30 100, 50 100, 55 120" fill="#DC2626"/> <!-- Red-600 top -->
      </g>
      <!-- Slice 2 (Right) -->
      <g class="cake-slice slice-right">
        <rect x="195" y="120" width="30" height="80" rx="5" fill="#EF4444"/> <!-- Red-500 -->
        <path d="M195 120 C200 100, 220 100, 225 120" fill="#DC2626"/> <!-- Red-600 top -->
      </g>
      <!-- Slice 3 (Top-Left) -->
      <g class="cake-slice slice-top-left">
        <rect x="50" y="70" width="25" height="60" rx="4" fill="#F97316"/> <!-- Orange-500 -->
        <path d="M50 70 C55 55, 70 55, 75 70" fill="#EA580C"/> <!-- Orange-600 top -->
      </g>
      <!-- Slice 4 (Top-Right) -->
      <g class="cake-slice slice-top-right">
        <rect x="175" y="70" width="25" height="60" rx="4" fill="#F97316"/> <!-- Orange-500 -->
        <path d="M175 70 C180 55, 195 55, 200 70" fill="#EA580C"/> <!-- Orange-600 top -->
      </g>

    </svg>
  </div>

  <!-- Message -->
  <div class="message" id="message">Happy Birthday Rana ji!</div>

  <!-- Optional sound -->
  <audio id="cutSound">
    <source src="https://assets.mixkit.co/sfx/download/mixkit-game-click-1114.wav" type="audio/mp3">
    Your browser does not support the audio element.
  </audio>

  <!-- Floating Hearts Container -->
  <div class="floating-hearts-container" id="floatingHearts">
    <!-- Hearts will be dynamically added here by JavaScript -->
  </div>

  <script>
    const cakeContainer = document.getElementById('cake');
    const message = document.getElementById('message');
    const sound = document.getElementById('cutSound');
    const floatingHeartsContainer = document.getElementById('floatingHearts');

    // Function to create and animate a single heart
    function createHeart() {
      const heart = document.createElement('div');
      heart.classList.add('heart');
      // Randomize initial position and size
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.animationDuration = (Math.random() * 10 + 10) + 's'; // 10-20s duration
      heart.style.animationDelay = (Math.random() * 5) + 's'; // 0-5s delay
      const size = Math.random() * 40 + 30; // 30-70px size
      heart.style.width = size + 'px';
      heart.style.height = size * 0.9 + 'px'; // Maintain heart aspect ratio
      heart.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 70%)`; // Random pastel color
      heart.style.opacity = 0; // Start hidden

      // Set different background colors for the pseudo-elements to match the main heart
      const baseColor = heart.style.backgroundColor;
      heart.style.setProperty('--heart-color', baseColor); // Custom property for pseudo-elements

      floatingHeartsContainer.appendChild(heart);

      // Remove heart after animation to prevent DOM clutter
      heart.addEventListener('animationend', () => {
        heart.remove();
      });
    }

    let heartInterval;

    cakeContainer.addEventListener('click', () => {
      // Add 'cut' class to the container to trigger slice animations
      cakeContainer.classList.add('cut');
      message.classList.add('show');
      sound.play();

      // Trigger initial confetti effect
      confetti({
        particleCount: 150,
        spread: 120,
        startVelocity: 40,
        origin: { y: 0.6, x: 0.5 },
        colors: ['#FFC0CB', '#FF69B4', '#EE82EE', '#FDE047', '#D946EF']
      });

      // Trigger balloon effect after a short delay
      setTimeout(() => {
        confetti({
          particleCount: 80,
          spread: 100,
          origin: { y: 0.8, x: 0.5 },
          angle: 270,
          scalar: 1.2,
          gravity: 0.5,
          decay: 0.95,
          startVelocity: 25,
          shapes: ['circle', 'square'],
          colors: ['#FFD700', '#FF6347', '#4682B4', '#9370DB', '#3CB371']
        });
      }, 300);

      // Trigger large floating hearts confetti effect after a slightly longer delay
      setTimeout(() => {
        confetti({
          particleCount: 25,
          spread: 150,
          origin: { y: 1, x: 0.5 },
          angle: 270,
          scalar: 2.5,
          gravity: 0.3,
          decay: 0.98,
          startVelocity: 15,
          shapes: ['heart'],
          colors: ['#FFC0CB', '#FF69B4', '#FF1493', '#DC143C']
        });
      }, 600);

      // Start background floating hearts animation
      setTimeout(() => {
        floatingHeartsContainer.classList.add('show-hearts');
        // Clear any existing interval to prevent multiple intervals running
        if (heartInterval) clearInterval(heartInterval);
        heartInterval = setInterval(createHeart, 800); // Create a new heart every 800ms
      }, 900); // Start background hearts after all confetti/balloons

      // Remove 'cut' class after a delay to reset the cake for another click
      setTimeout(() => {
        cakeContainer.classList.remove('cut');
      }, 1500);

      // Stop hearts after some time (e.g., 10 seconds)
      setTimeout(() => {
        clearInterval(heartInterval);
        floatingHeartsContainer.classList.remove('show-hearts'); // Fade out container
        // Remove all hearts from DOM after fade out
        setTimeout(() => {
          floatingHeartsContainer.innerHTML = '';
        }, 2000);
      }, 10000); // Stop hearts after 10 seconds
    });
  </script>
</body>
</html>
